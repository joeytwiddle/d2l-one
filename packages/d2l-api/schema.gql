scalar UserID
scalar RescueID
scalar SiteID
scalar Date

# Fixes an issue with allRescuesForMonth()
scalar String

schema {
  query: Query
  mutation: Mutation
}

type Query {
  me: User
  user(id: UserID!): User
  allUsers: [User]
  rescues: [Rescue]
  allRescuesForMonth(month: String!): [Rescue]
  #search(term: String!): [SearchResult!]!
}

type Mutation {
  # NOTE: I actually want to return Boolean here, or nothing, but neither worked
  logIn(username: String!, password: String!): User
  assignSelfToRescue(rescueId: RescueID!): Rescue!
}

enum Role {
  USER
  ADMIN
}

type User {
  id: UserID!
  name: String!
  telegramName: String!
  email: String
  role: Role!
}

type Rescue {
  id: RescueID!
  date: Date!
  site: Site!
  rescuers: [User]!
}

type Site {
  id: SiteID!
  name: String!
  geoLocation: String!
}

query GetUser {
  me {
    id
    name
  }
}

#query GetMyRescues {
#  myRescues {
#    id
#    date
#    site {
#      id
#      name
#    }
#  }
#}

query GetAllRescuesForMonth($month: String!) {
  allRescuesForMonth(month: $month) {
    id
    date
    site {
      id
      name
    }
    rescuers {
      id
      name
    }
  }
}

query GetAllRescues {
  rescues {
    id
    date
    site {
      id
      name
    }
    rescuers {
      id
      name
    }
  }
}

mutation LogIn($username: String!, $password: String!) {
  logIn(username: $username, password: $password) {
    id
  }
}

mutation AssignSelfToRescue($rescueId: RescueID!) {
  assignSelfToRescue(rescueId: $rescueId) {
    id
  }
}
